<h3><%= @check %></h3>
<%= failing = Host.hosts_failing(@check)
    succeeding = Host.hosts_succeeding(@check)
    if failing.size > 0
"#{failing.size}/#{failing.size + succeeding.size} hosts failing"
else
"all hosts pass"
end %>
<br>

<% if failing.size > 0 %>
<div id="failing">
  <% failing.each do |h| %>
  <%= hostlink(h) %> <%= status(Host::FAIL) %>
  <br>
  <% if h.check(@check).body.size > 0 %>
  <pre><%= h.check(@check).body %></pre>
  <% end %>
  <% end %>
</div>
<% end %>

<% if succeeding.size > 0 %>
<div id="succeeding">
  <% succeeding.each do |h| %>
  <%= hostlink(h) %> <%= status(Host::OK) %>
  <br>
  <% if h.check(@check).body.size > 0 %>
  <pre><%= h.check(@check).body %></pre>
  <% end %>
  <% end %>
</div>
<% end %>
